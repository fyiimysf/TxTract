import{a as Q,t as se,d as De,c as xe,f as me}from"../chunks/disclose-version.BNN9Rqle.js";import{p as Ae,g as Te,t as je,a as Ie,c as E,k as g,a4 as $,s as K,r as S,ax as ae,m as ge,f as we}from"../chunks/runtime.BS41eHzz.js";import{p as re,i as ce}from"../chunks/props.BT8cK01h.js";import{a as le,M as Fe,B as Ge,o as Z,I as oe,r as ze,b as ye,c as be,s as Ue,d as We}from"../chunks/Modal.A4_Qxr9T.js";import{t as _e,f as ke}from"../chunks/index.Bj3M55oE.js";import{b as fe}from"../chunks/this.B1jqbtcd.js";import"../chunks/legacy.SMf5m6Ot.js";import"../chunks/client.MgeZoavi.js";var Be=se('<div class="qrcode-sanner-container"><video id="camera-video" class="camera-video svelte-2js39j"><track kind="captions"></video> <canvas id="camera-canvas" class="camera-canvas"></canvas></div>',2);function Ye(a,n){Ae(n,!0);let i=re(n,"width",15,340),v=re(n,"style",3,""),O=re(n,"autoOpen",3,!0),j=re(n,"mirrorDisplay",11,!0),p=re(n,"useFrontCamera",7,!0),m=re(n,"useAudio",3,!0),I=re(n,"needFrames",3,!1),T,b=ae(null),u,w,A,_,P=[],M,D,k=!1,U=ge(()=>g(b)?g(b).videoHeight/g(b).videoWidth:1),C=ge(()=>g(U)&&g(b)?(i(i()||g(b).videoWidth),i()*g(U)):i());const R=()=>new Promise((l,d)=>{w&&(P=[],_=new MediaRecorder(w),_.ondataavailable=L=>{P.push(L.data)},_.onstop=()=>{const L=new Blob(P,{type:"video/mp4"});n.onVideo&&n.onVideo(L),l(L),_=null,P=[]},_.start(),n.onStartVideoRecording&&n.onStartVideoRecording())}),Y=()=>{_&&(_.stop(),n.onStopVideoRecording&&n.onStopVideoRecording())},H=async l=>{let d=null;return A&&u&&T&&(l?d=A.getImageData(0,0,i(),g(C)):d=u.toDataURL(),n.onImage&&n.onImage(d)),d},x=()=>{u&&o()},F=()=>{u&&c()},X=()=>{k=!0,_&&_.pause(),t()},q=()=>{k=!1,_&&_.resume(),y()},ee=()=>T,W=()=>!!_,te=l=>{p(!p()),o(l)},z=async()=>{let l=await navigator.mediaDevices.enumerateDevices();const d=[];return(l||[]).forEach(L=>{L.kind==="videoinput"&&(d.push(L),L.label.includes("front")?M=L:D=L)}),d},V=()=>{T=!0,n.onOpen&&n.onOpen()},J=()=>{n.onClose&&n.onClose()},y=()=>{n.onPause&&n.onPause()},t=()=>{n.onResume&&n.onResume()},e=async()=>{if(g(b)&&u){A=u.getContext("2d",{willReadFrequently:!0}),g(b).addEventListener("canplay",()=>{V(),r()}),O()&&o();let l=await z();l&&n.onInit&&n.onInit(l)}},o=l=>{T&&c();let d={video:!0,audio:m()};l?d={video:{deviceId:l},audio:m()}:p()&&M?d={video:{deviceId:M.deviceId},audio:m()}:D&&(d={video:{deviceId:D.deviceId},audio:m()}),navigator.mediaDevices.getUserMedia(d).then(L=>{g(b)&&(g(b).srcObject=L,w=L,g(b).play())}).catch(L=>{console.error("Unable to access the camera.",L)})},c=()=>{w&&(w.getTracks().forEach(l=>{l.stop()}),J(),_&&(_.stop(),_=null),w=null)},r=()=>{g(b)&&u&&i()&&g(C)&&T&&(k||w&&(j()?(A.scale(-1,1),A.drawImage(g(b),-i(),0,i(),g(C)),A.scale(-1,1)):A.drawImage(g(b),0,0,i(),g(C)),I()&&n.onFrame&&n.onFrame(A.getImageData(0,0,i(),g(C))))),requestAnimationFrame(r)};Te(()=>(e(),()=>{c()}));var s=Be(),f=E(s);f.muted=!0,fe(f,l=>$(b,l),()=>g(b));var h=K(f,2);return fe(h,l=>u=l,()=>u),S(s),je(()=>{le(f,"width",i()),le(f,"height",g(C)),le(h,"style",v()),le(h,"width",i()),le(h,"height",g(C))}),Q(a,s),Ie({startVideoRecording:R,stopVideoRecording:Y,captureImage:H,open:x,close:F,pause:X,resume:q,isPlaying:ee,isRecording:W,switchCamera:te,getCameraDevices:z})}var He={exports:{}};(function(a){var n=function(i){var v=Object.prototype,O=v.hasOwnProperty,j=Object.defineProperty||function(t,e,o){t[e]=o.value},p,m=typeof Symbol=="function"?Symbol:{},I=m.iterator||"@@iterator",T=m.asyncIterator||"@@asyncIterator",b=m.toStringTag||"@@toStringTag";function u(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch{u=function(e,o,c){return e[o]=c}}function w(t,e,o,c){var r=e&&e.prototype instanceof U?e:U,s=Object.create(r.prototype),f=new V(c||[]);return j(s,"_invoke",{value:ee(t,o,f)}),s}i.wrap=w;function A(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(c){return{type:"throw",arg:c}}}var _="suspendedStart",P="suspendedYield",M="executing",D="completed",k={};function U(){}function C(){}function R(){}var Y={};u(Y,I,function(){return this});var H=Object.getPrototypeOf,x=H&&H(H(J([])));x&&x!==v&&O.call(x,I)&&(Y=x);var F=R.prototype=U.prototype=Object.create(Y);C.prototype=R,j(F,"constructor",{value:R,configurable:!0}),j(R,"constructor",{value:C,configurable:!0}),C.displayName=u(R,b,"GeneratorFunction");function X(t){["next","throw","return"].forEach(function(e){u(t,e,function(o){return this._invoke(e,o)})})}i.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===C||(e.displayName||e.name)==="GeneratorFunction":!1},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,R):(t.__proto__=R,u(t,b,"GeneratorFunction")),t.prototype=Object.create(F),t},i.awrap=function(t){return{__await:t}};function q(t,e){function o(s,f,h,l){var d=A(t[s],t,f);if(d.type==="throw")l(d.arg);else{var L=d.arg,N=L.value;return N&&typeof N=="object"&&O.call(N,"__await")?e.resolve(N.__await).then(function(G){o("next",G,h,l)},function(G){o("throw",G,h,l)}):e.resolve(N).then(function(G){L.value=G,h(L)},function(G){return o("throw",G,h,l)})}}var c;function r(s,f){function h(){return new e(function(l,d){o(s,f,l,d)})}return c=c?c.then(h,h):h()}j(this,"_invoke",{value:r})}X(q.prototype),u(q.prototype,T,function(){return this}),i.AsyncIterator=q,i.async=function(t,e,o,c,r){r===void 0&&(r=Promise);var s=new q(w(t,e,o,c),r);return i.isGeneratorFunction(e)?s:s.next().then(function(f){return f.done?f.value:s.next()})};function ee(t,e,o){var c=_;return function(s,f){if(c===M)throw new Error("Generator is already running");if(c===D){if(s==="throw")throw f;return y()}for(o.method=s,o.arg=f;;){var h=o.delegate;if(h){var l=W(h,o);if(l){if(l===k)continue;return l}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(c===_)throw c=D,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);c=M;var d=A(t,e,o);if(d.type==="normal"){if(c=o.done?D:P,d.arg===k)continue;return{value:d.arg,done:o.done}}else d.type==="throw"&&(c=D,o.method="throw",o.arg=d.arg)}}}function W(t,e){var o=e.method,c=t.iterator[o];if(c===p)return e.delegate=null,o==="throw"&&t.iterator.return&&(e.method="return",e.arg=p,W(t,e),e.method==="throw")||o!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),k;var r=A(c,t.iterator,e.arg);if(r.type==="throw")return e.method="throw",e.arg=r.arg,e.delegate=null,k;var s=r.arg;if(!s)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k;if(s.done)e[t.resultName]=s.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return s;return e.delegate=null,k}X(F),u(F,b,"Generator"),u(F,I,function(){return this}),u(F,"toString",function(){return"[object Generator]"});function te(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(te,this),this.reset(!0)}i.keys=function(t){var e=Object(t),o=[];for(var c in e)o.push(c);return o.reverse(),function r(){for(;o.length;){var s=o.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}};function J(t){if(t){var e=t[I];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var o=-1,c=function r(){for(;++o<t.length;)if(O.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=p,r.done=!0,r};return c.next=c}}return{next:y}}i.values=J;function y(){return{value:p,done:!0}}return V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(z),!t)for(var e in this)e.charAt(0)==="t"&&O.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(l,d){return s.type="throw",s.arg=t,e.next=l,d&&(e.method="next",e.arg=p),!!d}for(var c=this.tryEntries.length-1;c>=0;--c){var r=this.tryEntries[c],s=r.completion;if(r.tryLoc==="root")return o("end");if(r.tryLoc<=this.prev){var f=O.call(r,"catchLoc"),h=O.call(r,"finallyLoc");if(f&&h){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(f){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else if(h){if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o];if(c.tryLoc<=this.prev&&O.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var r=c;break}}r&&(t==="break"||t==="continue")&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,k):this.complete(s)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),z(o),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var c=o.completion;if(c.type==="throw"){var r=c.arg;z(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:J(t),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=p),k}},i}(a.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(He);var he=(a,n)=>`${a}-${n}-${Math.random().toString(16).slice(3,8)}`;const qe=he;let Le=0;var Pe=({id:a,action:n,payload:i={}})=>{let v=a;return typeof v>"u"&&(v=qe("Job",Le),Le+=1),{id:v,action:n,payload:i}},ie={};let pe=!1;ie.logging=pe;ie.setLogging=a=>{pe=a};ie.log=(...a)=>pe?console.log.apply(void 0,a):null;const Ke=Pe,{log:ue}=ie,Ve=he;let Ee=0;var Je=()=>{const a=Ve("Scheduler",Ee),n={},i={};let v=[];Ee+=1;const O=()=>v.length,j=()=>Object.keys(n).length,p=()=>{if(v.length!==0){const u=Object.keys(n);for(let w=0;w<u.length;w+=1)if(typeof i[u[w]]>"u"){v[0](n[u[w]]);break}}},m=(u,w)=>new Promise((A,_)=>{const P=Ke({action:u,payload:w});v.push(async M=>{v.shift(),i[M.id]=P;try{A(await M[u].apply(void 0,[...w,P.id]))}catch(D){_(D)}finally{delete i[M.id],p()}}),ue(`[${a}]: Add ${P.id} to JobQueue`),ue(`[${a}]: JobQueue length=${v.length}`),p()});return{addWorker:u=>(n[u.id]=u,ue(`[${a}]: Add ${u.id}`),ue(`[${a}]: Number of workers=${j()}`),p(),u.id),addJob:async(u,...w)=>{if(j()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return m(u,w)},terminate:async()=>{Object.keys(n).forEach(async u=>{await n[u].terminate()}),v=[]},getQueueLen:O,getNumWorkers:j}};function Ze(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Qe(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var $e=Qe;const Xe=$e;var et=a=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":Xe()?n.type="electron":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof Ze=="function"&&(n.type="node"),typeof a>"u"?n:n[a]};const tt=et("type")==="browser",rt=tt?a=>new URL(a,window.location.href).href:a=>a;var nt=a=>{const n={...a};return["corePath","workerPath","langPath"].forEach(i=>{a[i]&&(n[i]=rt(n[i]))}),n},ot=a=>{const n=[],i=[],v=[],O=[],j=[];return a.blocks&&a.blocks.forEach(p=>{p.paragraphs.forEach(m=>{m.lines.forEach(I=>{I.words.forEach(T=>{T.symbols.forEach(b=>{j.push({...b,page:a,block:p,paragraph:m,line:I,word:T})}),O.push({...T,page:a,block:p,paragraph:m,line:I})}),v.push({...I,page:a,block:p,paragraph:m})}),i.push({...m,page:a,block:p})}),n.push({...p,page:a})}),{...a,blocks:n,paragraphs:i,lines:v,words:O,symbols:j}},Ce={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const at="tesseract.js",st="5.1.1",it="Pure Javascript Multilingual OCR",ct="src/index.js",lt="src/index.d.ts",ut="dist/tesseract.min.js",dt="dist/tesseract.min.js",ft={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},vt={"./src/worker/node/index.js":"./src/worker/browser/index.js"},ht="",pt=["jeromewu"],mt="Apache-2.0",gt={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},wt={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.1","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},yt={"@rollup/pluginutils":"^5.0.2"},bt={type:"git",url:"https://github.com/naptha/tesseract.js.git"},_t={url:"https://github.com/naptha/tesseract.js/issues"},kt="https://github.com/naptha/tesseract.js",Lt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Et={name:at,version:st,description:it,main:ct,types:lt,unpkg:ut,jsdelivr:dt,scripts:ft,browser:vt,author:ht,contributors:pt,license:mt,devDependencies:gt,dependencies:wt,overrides:yt,repository:bt,bugs:_t,homepage:kt,collective:Lt};var St={workerBlobURL:!0,logger:()=>{}};const Ot=Et.version,Rt=St;var At={...Rt,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Ot}/dist/worker.min.js`},Tt=({workerPath:a,workerBlobURL:n})=>{let i;if(Blob&&URL&&n){const v=new Blob([`importScripts("${a}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(v))}else i=new Worker(a);return i},jt=a=>{a.terminate()},It=(a,n)=>{a.onmessage=({data:i})=>{n(i)}},Pt=async(a,n)=>{a.postMessage(n)};const de=a=>new Promise((n,i)=>{const v=new FileReader;v.onload=()=>{n(v.result)},v.onerror=({target:{error:{code:O}}})=>{i(Error(`File could not be read! Code=${O}`))},v.readAsArrayBuffer(a)}),ve=async a=>{let n=a;if(typeof a>"u")return"undefined";if(typeof a=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(a)?n=atob(a.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(a)).arrayBuffer();else if(typeof HTMLElement<"u"&&a instanceof HTMLElement)a.tagName==="IMG"&&(n=await ve(a.src)),a.tagName==="VIDEO"&&(n=await ve(a.poster)),a.tagName==="CANVAS"&&await new Promise(i=>{a.toBlob(async v=>{n=await de(v),i()})});else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){const i=await a.convertToBlob();n=await de(i)}else(a instanceof File||a instanceof Blob)&&(n=await de(a));return new Uint8Array(n)};var Ct=ve;const Nt=At,Mt=Tt,Dt=jt,xt=It,Ft=Pt,Gt=Ct;var zt={defaultOptions:Nt,spawnWorker:Mt,terminateWorker:Dt,onMessage:xt,send:Ft,loadImage:Gt};const Ut=nt,Wt=ot,B=Pe,{log:Se}=ie,Bt=he,ne=Ce,{defaultOptions:Yt,spawnWorker:Ht,terminateWorker:qt,onMessage:Kt,loadImage:Oe,send:Vt}=zt;let Re=0;var Ne=async(a="eng",n=ne.LSTM_ONLY,i={},v={})=>{const O=Bt("Worker",Re),{logger:j,errorHandler:p,...m}=Ut({...Yt,...i}),I={},T={},b=typeof a=="string"?a.split("+"):a;let u=n,w=v;const A=[ne.DEFAULT,ne.LSTM_ONLY].includes(n)&&!m.legacyCore;let _,P;const M=new Promise((r,s)=>{P=r,_=s}),D=r=>{_(r.message)};let k=Ht(m);k.onerror=D,Re+=1;const U=(r,s)=>{I[r]=s},C=(r,s)=>{T[r]=s},R=({id:r,action:s,payload:f})=>new Promise((h,l)=>{Se(`[${O}]: Start ${r}, action=${s}`);const d=`${s}-${r}`;U(d,h),C(d,l),Vt(k,{workerId:O,jobId:r,action:s,payload:f})}),Y=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),H=r=>R(B({id:r,action:"load",payload:{options:{lstmOnly:A,corePath:m.corePath,logging:m.logging}}})),x=(r,s,f)=>R(B({id:f,action:"FS",payload:{method:"writeFile",args:[r,s]}})),F=(r,s)=>R(B({id:s,action:"FS",payload:{method:"readFile",args:[r,{encoding:"utf8"}]}})),X=(r,s)=>R(B({id:s,action:"FS",payload:{method:"unlink",args:[r]}})),q=(r,s,f)=>R(B({id:f,action:"FS",payload:{method:r,args:s}})),ee=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),W=(r,s)=>R(B({id:s,action:"loadLanguage",payload:{langs:r,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[ne.DEFAULT,ne.LSTM_ONLY].includes(u)&&!m.legacyLang}}})),te=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),z=(r,s,f,h)=>R(B({id:h,action:"initialize",payload:{langs:r,oem:s,config:f}})),V=(r="eng",s,f,h)=>{if(A&&[ne.TESSERACT_ONLY,ne.TESSERACT_LSTM_COMBINED].includes(s))throw Error("Legacy model requested but code missing.");const l=s||u;u=l;const d=f||w;w=d;const N=(typeof r=="string"?r.split("+"):r).filter(G=>!b.includes(G));return b.push(...N),N.length>0?W(N,h).then(()=>z(r,l,d,h)):z(r,l,d,h)},J=(r={},s)=>R(B({id:s,action:"setParameters",payload:{params:r}})),y=async(r,s={},f={blocks:!0,text:!0,hocr:!0,tsv:!0},h)=>R(B({id:h,action:"recognize",payload:{image:await Oe(r),options:s,output:f}})),t=(r="Tesseract OCR Result",s=!1,f)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),R(B({id:f,action:"getPDF",payload:{title:r,textonly:s}}))),e=async(r,s)=>{if(A)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return R(B({id:s,action:"detect",payload:{image:await Oe(r)}}))},o=async()=>(k!==null&&(qt(k),k=null),Promise.resolve());Kt(k,({workerId:r,jobId:s,status:f,action:h,data:l})=>{const d=`${h}-${s}`;if(f==="resolve"){Se(`[${r}]: Complete ${s}`);let L=l;h==="recognize"?L=Wt(l):h==="getPDF"&&(L=Array.from({...l,length:Object.keys(l).length})),I[d]({jobId:s,data:L})}else if(f==="reject")if(T[d](l),h==="load"&&_(l),p)p(l);else throw Error(l);else f==="progress"&&j({...l,userJobId:s})});const c={id:O,worker:k,setResolve:U,setReject:C,load:Y,writeText:x,readText:F,removeFile:X,FS:q,loadLanguage:ee,initialize:te,reinitialize:V,setParameters:J,recognize:y,getPDF:t,detect:e,terminate:o};return H().then(()=>W(a)).then(()=>z(a,n,v)).then(()=>P(c)).catch(()=>{}),M};const Me=Ne,Jt=async(a,n,i)=>{const v=await Me(n,1,i);return v.recognize(a).finally(async()=>{await v.terminate()})},Zt=async(a,n)=>{const i=await Me("osd",0,n);return i.detect(a).finally(async()=>{await i.terminate()})};var Qt={recognize:Jt,detect:Zt},$t={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Xt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const er=Je,tr=Ne,rr=Qt,nr=$t,or=Ce,ar=Xt,{setLogging:sr}=ie;var ir={languages:nr,OEM:or,PSM:ar,createScheduler:er,createWorker:tr,setLogging:sr,...rr};new TextEncoder;var cr=(a,n)=>{n()},lr=se('<button class="btn btn-circle w-40"><!></button> <button class="btn btn-circle w-40"><!></button>',1),ur=(a,n,i,v)=>{$(n,!g(n)),$(i,!g(i)),v()},dr=se('<button class="btn btn-circle btn-block mr-4"><!></button>'),fr=(a,n)=>{n()},vr=se('<div class="flex-row items-center justify-center pb-2 pt-2"><button class="bg-alert btn btn-active btn-sm mr-3"><!></button> <button class="btn btn-active btn-sm mr-4"><!></button></div>'),hr=(a,n,i)=>{n(),$(i,"line-md:loading-twotone-loop")},pr=se('<a><div class="relative z-50 flex items-center justify-center"><div class="flex-row"><button class="mouse h-24 w-36 rounded-3xl bg-green-600 px-4 text-white shadow-lg transition duration-200 ease-in hover:bg-red-700 focus:outline-none active:shadow-2xl"><div class="flex flex-col"><center><!></center> <p class="text-lg"><!></p></div></button></div></div></a>'),mr=se('<div class="container"><div><div class="card flex-col px-2"><center class="flex items-center justify-center"><div class="outline-3 card outline outline-offset-2"><!></div></center> <div class="flex justify-evenly py-4"><!></div> <div class="shadow-3xl flex-row items-center justify-stretch"><div class=" card"><textarea disabled placeholder="Text Output"></textarea> <div class="card-actions justify-end"><!></div></div></div></div></div> <!> <div class=" fixed inset-x-1/2 top-3/4 z-50 flex items-center justify-center"><div class="relative inset-y-16"><!></div></div> <!></div>');function Sr(a,n){Ae(n,!0);let i,v=ae(!1),O=ae(!1),j=ae(!1),p=ae("h-32"),m=ae("line-md:cellphone-screenshot");Te(()=>{Z.value!==""&&$(p," h-40")});const I=async()=>{let y=await i.captureImage();i.pause(),u(y),console.log(y),$(j,!0)},T=async()=>{i.resume(),Z.value="",$(j,!1),$(m,"line-md:cellphone-screenshot"),$(p,"h-32")};function b(){new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",month:"2-digit",year:"numeric",day:"2-digit",hour12:!0}),ye.content=Z.value,be.current.push(ye),console.log(JSON.stringify(be.current))}function u(y){(async()=>{const t=await ir.createWorker("eng"),e=await t.recognize(y);console.log(e.data.text),Z.value=e.data.text,await t.terminate()})()}var w=mr(),A=E(w),_=E(A),P=E(_),M=E(P),D=E(M);fe(Ye(D,{autoOpen:!0,style:"border-radius:17px; margin-bottom: %;",get mirrorDisplay(){return g(v)},get useFrontCamera(){return g(O)}}),y=>i=y,()=>i),S(M),S(P);var k=K(P,2),U=E(k);{var C=y=>{var t=lr(),e=we(t);e.__click=b;var o=E(e);oe(o,{icon:"line-md:folder-arrow-down",class:"h-10 w-10"}),S(e);var c=K(e,2);c.__click=[cr,T];var r=E(c);oe(r,{icon:"line-md:rotate-270",class:"h-11 w-11"}),S(c),Q(y,t)},R=y=>{var t=xe(),e=we(t);{var o=c=>{var r=dr();r.__click=[ur,O,v,T];var s=E(r);oe(s,{icon:"line-md:round-360",class:"h-12 w-12"}),S(r),Q(c,r)};ce(e,c=>{Z.value===""&&c(o)},!0)}Q(y,t)};ce(U,y=>{Z.value!==""?y(C):y(R,!1)})}S(k);var Y=K(k,2),H=E(Y),x=E(H);ze(x);var F=K(x,2),X=E(F);{var q=y=>{var t=vr(),e=E(t);e.__click=[fr,T];var o=E(e);oe(o,{icon:"line-md:chat-off",class:"h-6 w-6 text-red-400"}),S(e);var c=K(e,2),r=E(c);oe(r,{icon:"line-md:clipboard-arrow",class:"h-6 w-6 text-green-400"}),S(c),S(t),Q(y,t)};ce(X,y=>{Z.value!==""&&y(q)})}S(F),S(H),S(Y),S(_),S(A);var ee=K(A,2);Fe(ee);var W=K(ee,2),te=E(W),z=E(te);{var V=y=>{var t=pr();t.__click=[hr,I,m];var e=E(t),o=E(e),c=E(o),r=E(c),s=E(r),f=E(s);oe(f,{get icon(){return g(m)},class:"h-12 w-12"}),S(s);var h=K(s,2),l=E(h);{var d=N=>{var G=me("Capture");Q(N,G)},L=N=>{var G=me("Extracting");Q(N,G)};ce(l,N=>{g(m)!=="line-md:loading-twotone-loop"?N(d):N(L,!1)})}S(h),S(r),S(c),S(o),S(e),S(t),_e(3,t,()=>ke),Q(y,t)};ce(z,y=>{Z.value===""&&y(V)})}S(te),S(W);var J=K(W,2);Ge(J),S(w),je(()=>{Ue(x,`textarea relative ${g(p)??""} flex-col`),We(x,Z.value)}),_e(3,w,()=>ke),Q(a,w),Ie()}De(["click"]);export{Sr as component};
